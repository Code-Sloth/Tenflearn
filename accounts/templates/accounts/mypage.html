{% extends 'base.html' %}

{% block title %}

{% endblock title %}

{% block content %}
{% load humanize %}
<div>
  <div class="d-flex justify-content-end">
      <a class="{% if q == 'course' %}query{% endif %}" href="{% url 'accounts:mypage' %}?q=course">수강목록
      </a>
      <a class="{% if q == 'review' %}query{% endif %}" href="{% url 'accounts:mypage' %}?q=review">리뷰목록
      </a>
      <a class="{% if q == 'cart' %}query{% endif %}" href="{% url 'accounts:mypage' %}?q=cart">주문목록</a>
  </div>
  <div>
      {% if not q %}{% with q='course' %}{% endwith %}{% endif %}
      {% if q == 'course' %}
          {% include 'accounts/course.html' %}
      {% elif q == 'review' %}
          {% include 'accounts/review.html' %}
      {% elif q == 'cart' %}
          {% include 'accounts/cart.html' %}
      {% endif %}
  </div>
</div>

{% if request.user.is_authenticated %}
<h2>{{user}}님 안녕하세요!</h2>
{% endif %}
<br>
내정보 
{% if user.image %}
    <img src="{{ user.image.url }}"/ alt="{{ user.username }}'s Profile Image">
{% else %}
    <p>이미지가 없습니다.</p>
{% endif %}

<p>ID: {{ user.username }}</p>
<p>성: {{ user.last_name }}</p>
<p>이름: {{ user.first_name }}</p>


{% comment %} <h2>장바구니</h2>
{% for item in cart_items %}
    <p>강의이름: {{ item.course.title }}</p>
    <p>가격: ￦{{ item.course.price|intcomma }}원</p>
    <p>할인율: {{ item.course.discount_rate }}%</p>
    <p>합계: ￦{{ item.course.discounted_price|intcomma }}원</p>
    <form action="{% url 'accounts:remove_cart' item.course.id %}" method="POST">
      {% csrf_token %}
      <button type="submit" class="btn btn-danger">장바구니 삭제</button>
    </form>
{% endfor %}

{% if cart_items %}
    
{% else %}
    <p>장바구니가 비어있습니다.</p>
{% endif %} {% endcomment %}


{% endblock content %} 